# string:50 = enum

# User (for login):
#   name: string
#   email: string unique
#   avatar_url: string
#   email_verified_at: datetime
#   password: string
#   relationships:
#     hasOne: Employee,TourLeader

models:

  # Region
  Province: #Jawa Tengah
    code: string unique index
    name: string index
    lat: string
    lng: string
    google_place_id: string
    softDeletes
    relationships:
      hasMany: Regency

  Regency:
    code: string unique index
    province_id: foreign constrained onDelete:cascade
    name: string index
    lat: string
    lng: string
    google_place_id: string
    softDeletes
    relationships:
      hasMany: District
      belongsTo: Province
  
  District:
    code: string unique index
    regency_id: foreign constrained onDelete:cascade
    name: string index
    lat: string
    lng: string
    google_place_id: string
    softDeletes
    relationships:
      hasMany: village
      belongsTo: Regency


#=============================================================#


  # Master Data
  Fleet:
    code: string unique index #ARMD-00001
    image: string nullable
    name: string index
    description: longText
    seat_set: tinyInteger
    category: string:50
    pic_name: string
    pic_phone: string
    softDeletes
    relationships:
      hasMany: OrderFleet

  Customer:
    code: string unique index #TK-00001
    name: string unique index
    address: string
    category: string:50 default:tk
    regency_id: foreign constrained onDelete:cascade
    district_id: foreign:districts.id constrained onDelete:cascade
    headmaster: string
    operator: string
    phone: string
    email: string nullable
    lat: string nullable
    lng: string nullable
    status: string:50
    softDeletes
    relationships:
      hasMany: Order,Feedback

  Destination:
    name: string unique index
    type: string:50
    marketing_name: string
    marketing_phone: string
    weekday_price: bigInteger
    weekend_price: bigInteger
    high_season_price: bigInteger nullable
    softDeletes

  TourTemplate:
    regency_id: foreign constrained onDelete:cascade
    destinations: json
    softDeletes

  CostDetail:
    name: string unique
    price: bigInteger
    cashback: bigInteger nullable

  Company:
    name: string default:"Yasuda Jaya Tour & Travel"
    logo: string default:logo.png
    email: string default:yasudajaya@gmail.com
    phone: string default:+628123456789
    balance: bigInteger default:0

  Employee:
    user_id: foreign constrained onDelete:cascade nullable
    name: string index
    photo: string nullable
    phone: string
    gender: string:50
    role: string:50
    
  TourLeader:
    user_id: foreign constrained onDelete:cascade nullable
    name: string index
    photo: string nullable
    phone: string unique
    gender: string:50
    relationships:
      hasMany: OrderFleet

#=============================================================#

  Order:
    code: string index unique #OR-00001
    customer_id: foreign constrained onDelete:cascade
    regency_id: foreign constrained onDelete:cascade
    description: longText
    destinations: json
    relationships:
      hasMany: OrderFleet

  OrderFleet:
    code: string index unique #OF-00001
    order_id: foreign constrained onDelete:cascade nullable
    fleet_id: foreign constrained onDelete:cascade
    trip_date: datetime
    duration: integer default:1
    payment_status: string:50
    payment_date: datetime nullable
    payment_amount: bigInteger nullable
    tour_leader_id: foreign constrained onDelete:cascade nullable

  Invoice:
    code: string index unique #INV-00001
    order_id: foreign constrained onDelete:cascade
    main_costs: json
    bills: json
    shirts: json
    seats_charge: json
    card_details: json
    special_notes: longText
    relationships:
      hasOne: ProfitLoss

  ProfitLoss:
    invoice_id: foreign constrained onDelete:cascade
    operational_costs: json
    special_costs: json
    variable_costs: json
    other_costs: json
    total_cost: bigInteger

  EmployeeSalary:
    user_id: foreign constrained onDelete:cascade
    amount: bigInteger
    date: datetime
    working_day: integer

  Feedback:
    customer_id: foreign constrained onDelete:cascade
    text: longText

  Receivable:
    creditor: string
    date: datetime
    due_date: datetime nullable
    amount: bigInteger
    status: string:50